<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="stylesheet" href="./dist/css/styles.css" />
      <script type="module" src="./src/js/index.mjs" defer></script>
      <script src="./node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
      <script src="https://kit.fontawesome.com/04c0f70bd8.js" crossorigin="anonymous"></script>
      <title>Listing Page</title>
   </head>
   <body class="bg-light-green-2 flex-grow-1 d-flex flex-column justify-content-between min-vh-100">
      <header class="container mt-2 px-0">
         <nav class="navbar navbar-expand-lg rounded-pill shadow pe-2">
            <a href="index.html" class="navbar-brand px-3 py-2 bg-dark-blue text-light-blue-1 data-field--left-logo">
               <p>Noroff Collectible</p>
            </a>
            <button id="ham-button" class="btn btn-outline-light-blue-2 d-lg-none" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
               <span class="fa-solid fa-bars"></span>
            </button>
            <div class="collapse navbar-collapse bg-light-blue-1 p-0" id="navbar-content">
               <div class="empty-box d-lg-none"></div>
               <div id="navbar-items" class="py-3 py-lg-0 px-3 px-lg-2 d-lg-flex align-items-center w-100">
                  <ul class="navbar-nav me-auto">
                     <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="index.html">Home</a>
                     </li>
                     <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="auctions-page.html">Auctions</a>
                     </li>
                  </ul>

                  <!-- new -->
                  <div class="header-search-container my-2 my-lg-0 mx-lg-2 position-relative">
                     <form id="search-form" class="data-field g-col-12" method="post" role="search" novalidate>
                        <input
                           id="search-input"
                           class="form-control data-field--left"
                           type="search"
                           name="searchfield"
                           placeholder="Find a listing"
                           aria-label="Search"
                           pattern="^[\w]+(\s[\w]+)*$"
                           oninvalid="this.setCustomValidity('Please enter one or more words separated by whitespace.')"
                           oninput="setCustomValidity('')"
                           required
                        />
                        <button type="submit" class="btn btn-accent-light data-field--right-accent-light g-col-2">
                           <i class="fa-solid fa-magnifying-glass"></i>
                        </button>
                     </form>
                     <section id="search-results-container" class="collapse search-results-container border border-light-blue-2 shadow-none pt-3 overflow-scroll">
                        <div class="mb-3 text-dark-blue">
                           <h3 id="search-result-title" class="pt-0 pt-lg-0 px-2 pb-1 mb-0">Search</h3>
                           <div id="search-result-listings"></div>
                        </div>
                     </section>
                  </div>
                  <a href="login-page.html" class="btn btn-outline-light me-1" aria-current="page">Login</a>
                  <button id="logout" class="btn btn-outline-light me-1 d-none" aria-current="page">Logout</button>
                  <a href="register-page.html" class="btn btn-accent-dark" aria-current="page">Register</a>
                  <a href="create-listing-page.html" class="btn btn-accent-dark d-none" aria-current="page">Create Listing</a>
               </div>
            </div>
         </nav>
      </header>
      <!-- Responsive Detail Listing Card -->
      <main class="grid">
         <div class="container content-section g-col-12 grid">
            <div class="card-listing-details g-col-12 m-lg-auto p-2 p-sm-3 gap-2">
               <section class="pb-0 rounded-top border-0 text-dark-blue pb-2">
                  <h1 id="listing-title" class="text-capitalize">Loading...</h1>
                  <div id="listing-tags" class="d-flex flex-wrap gap-1 mt-2"></div>
               </section>
               <div id="listing-data-container" class="grid">
                  <div id="listing-img-container" class="g-col-12 g-col-lg-6 mb-2">
                     <img id="listing-image" class="img-thumbnail--listing g-col-12 g-col-lg-6" />
                  </div>
                  <div id="media-carousel" class="carousel d-none slide g-col-12 g-col-lg-6" data-bs-ride="carousel">
                     <div id="listing-carousel-indicators" class="carousel-indicators carousel-indicators--details">
                        <!-- indicators -->
                     </div>
                     <div id="media-carousel-container" class="carousel-inner pb-2">
                        <!-- images -->
                     </div>
                     <div class="carousel-control-prev carousel-control--center">
                        <button class="btn btn-accent-light" type="button" data-bs-target="#media-carousel" data-bs-slide="prev">
                           <i class="fa-solid fa-chevron-left fs-5" aria-hidden="true"></i>
                           <span class="visually-hidden">Previous</span>
                        </button>
                     </div>
                     <div class="carousel-control-next carousel-control--center">
                        <button class="btn btn-accent-light" type="button" data-bs-target="#media-carousel" data-bs-slide="next">
                           <i class="fa-solid fa-chevron-right fs-5" aria-hidden="true"></i>
                           <span class="visually-hidden">Next</span>
                        </button>
                     </div>
                  </div>
                  <div id="listing-card-body" class="g-col-12 g-col-lg-6 d-flex flex-column justify-content-between">
                     <div id="last-bid-promo" class="d-flex gap-1 justify-content-center align-items-center">
                        <p class="fs-3 fw-bold border-dark-blue">Listing Bids</p>
                     </div>
                     <div class="d-flex flex-column justify-content-center my-3 my-lg-0">
                        <div class="p-2 py-0">
                           <div class="data-field">
                              <div class="data-field--left mb-1">
                                 <p>Current Price</p>
                              </div>
                              <div class="data-field--right-accent mb-1">
                                 <p id="listing-last-bid" class="fw-bold border-2 border-bottom pe-1 border-dark-blue">0</p>
                                 <i class="fa-solid fa-tag"></i>
                              </div>
                           </div>
                           <div class="data-field mb-2">
                              <div class="data-field--left-deadline mb-1">
                                 <p>Ends in</p>
                              </div>
                              <div class="data-field--right-deadline mb-1">
                                 <p id="listing-deadline"></p>
                              </div>
                           </div>
                           <div class="data-field">
                              <div class="data-field--left mb-1">
                                 <p>Bids</p>
                              </div>
                              <div class="data-field--right mb-1">
                                 <p class="fw-bold" id="listing-bids"></p>
                              </div>
                           </div>

                           <div class="data-field">
                              <div class="data-field--left">
                                 <p>Created</p>
                              </div>
                              <div class="data-field--right">
                                 <p id="listing-created"></p>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div id="register-to-bid" class="p-3 bg-light-blue-2">
                        <a id="register-button" href="register-page.html" class="btn btn-accent-dark w-100">Register to Bid</a>
                     </div>
                     <!-- login form -->
                     <form method="post" action="/listings" id="bid-form" class="d-flex flex-column gap-2 needs-validation shadow-none p-2 p-sm-3 d-none" novalidate>
                        <div id="bid-group" class="form-group">
                           <label for="amount" class="form-label">Bid Amount</label>
                           <input type="text" class="form-control" id="amount" name="amount" placeholder="Place credits" required min="0" />
                        </div>
                        <input type="submit" class="btn btn-accent-dark" value="Add Bid" />
                        <div id="api-success-msg" class="p-1 d-none">
                           <p class="fw-semibold text-center">You added a bid!</p>
                        </div>
                        <div id="api-fail-msg" class="p-1 d-none">
                           <p id="api-fail-msg-text" class="fw-semibold text-center"></p>
                        </div>
                     </form>
                  </div>
               </div>
            </div>

            <!-- Listing Description -->
            <section class="card-listing-description g-col-12 g-col-lg-6 p-2 p-sm-3 p-sm-3">
               <h3>Description</h3>
               <p id="listing-description"></p>
            </section>
            <!-- Listing Seller -->
            <div class="card-listing-seller g-col-12 g-col-lg-6 p-2 p-sm-3 p-sm-3">
               <h3 class="mb-3">Seller</h3>
               <div class="d-flex flex-column flex-md-row gap-md-3 align-content-end">
                  <div id="seller-description" class="d-flex flex-column align-items-center align-items-md-start align-items-lg-center justify-content-center w-100">
                     <div class="d-flex flex-column flex-sm-row flex-lg-column align-items-center mb-2 gap-2">
                        <img id="seller-image" class="rounded-pill img-thumbnail--avatar-seller" />
                        <div>
                           <p id="seller-name" class="fw-bold fs-4 text-center text-sm-start text-capitalize ps-1">Seller Name</p>
                           <p id="seller-email" class="fw-semibold text-center text-sm-start fs-5 text-capitalize ps-1 mb-2">Seller Email</p>
                           <div class="data-field">
                              <div class="data-field--left fw-semibold">
                                 <p>Wins</p>
                              </div>
                              <div class="data-field--right">
                                 <p id="seller-auctions-won" class="right-width-large fw-bold"></p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>

            <!-- Listing Bid History -->
            <div class="card g-col-12 p-2 p-sm-3">
               <div class="card-title">
                  <h3>Bidding History</h3>
               </div>
               <div class="border rounded bg-light-blue-2">
                  <table class="table">
                     <thead class="bg-light-blue-2">
                        <tr>
                           <th scope="col" class="ps-2">#</th>
                           <th scope="col">Created</th>
                           <th scope="col">Name</th>
                           <th scope="col">Amount</th>
                        </tr>
                     </thead>
                     <tbody id="bid-container"></tbody>
                  </table>
               </div>
            </div>
         </div>
      </main>
      <!-- Footer -->
      <footer class="footer">
         <div class="container cta-section d-flex flex-column justify-content-center align-items-center">
            <h2 class="mb-3">Not registered yet?</h2>
            <p class="mb-1 text-center">Register now and get 1000 credits to use right away</p>
            <p class="mb-3 text-center">Save your money and start bidding now</p>
            <a href="register-page.html" class="btn btn-accent-light">Create an account</a>
         </div>
         <div>
            <p class="footer-copywrite">Copyright</p>
         </div>
      </footer>
   </body>
</html>
